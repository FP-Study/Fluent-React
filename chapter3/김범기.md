# The Virtual DOM

## Real DOM

DOM(Document Object Model)은 웹페이지의 각 HTML 요소를 노드로 표현한 트리구조 모델이다.

예시 html document

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Example</title>
  </head>
  <body>
    <h1 class="heading">Welcome</h1>
    <!-- 그 외 -->
  </body>
</html>
```

예시 DOM(실제 DOM은 각 노드마다 proterties, method가 더 있지만 편의를 위해 간략화)

```js
const dom = {
    type: "document",
    doctype: "html",
    children: [
        {
            type: "element",
            tagName: "html",
            children: [
                {
                    type: "element",
                    tagName: "head",
                    children: [
                        {
                            type: "element",
                            tagName: "title",
                            children: "Example",
                        }
                    ]
                },
                {
                    type: "element",
                    tagName: "body",
                    children: [
                        {
                            type: "element",
                            tagName: "h1",
                            innerHTML: "Welcome"
                            children: [],
                            className: "heading",
                        },
                        // ~~~
                        ,
                    ]
                },
            ]
        }
    ]
}
```

JavaScript에서 DOM에 접근하려면 document.querySelector나 document.getElementbyId 등의 API를 사용해야함.

## DOM을 직접 사용하는 것의 문제점

1. 모든 변경이 일어날 때마다 다시 DOM을 작성해야 되기 때문에 많은 연산이 필요함.

   이러한 문제를 보안할 방법이 있지만 사용하기 불편함

2. Cross-browser Compatibilty 문제, 브라우저의 종류 버전에 따라 지원하는 DOM attributes가 다름

## Document Fragment

모든 변경하다 다시 계산하는 문제를 해결하기 위한 방안으로 여러개의 변경사항을 batch로 묶어 한번에 변경사항을 기록

예시 코드

```js

```

## React Virtual DOM

실제 DOM의 추상화된 복사본 각 React element를 노드한 트리구조

Document Fragment의 보완점을 넘어 Cross-browser Compatibilty도 해결가능

Virtual DOM으로 문서를 update 하는 법

React는 이전 버전과 변경된 버전의 Virtual DOM을 메모리에 보관하고 diffing algorithm을 통해 두 버전을 비교해 변경사항을 감지하고 이를 실제 DOM에 반영하기 위한 최소한의 변경사항을 적용

## 불필요한 Rerendering 문제

React의 디자인상 state가 변경되면 해당 react element와 모든 하위 요소가 rerendering됨.
rerendering 될 필요가 없는 컴포넌트도 rerendering 돠ㅣ는 경우가 생김

예시

```

```

신중한 컴포넌트 구조

useMomo와 같은 react feature를 적절히 사용
